<!DOCTYPE html>
<!-- http://echarts.zhangmuchen.top/#/detail?cid=xFJL-TEbNv -->
<html style="height: 100%; width: 100%">

<head>
  <meta charset="utf-8" />
</head>

<body style="height: 100%; width: 100%; margin: 0">
  <!-- <div id="chart-panel" style="height: 263px; width: 88px"></div> -->
  <div id="chart-panel" style="height: 100%; width: 100%"></div>
  <script type="text/javascript" src="../js/echarts@5.2.0.min.js"></script>

  <script type="text/javascript">
    var dom = document.getElementById("chart-panel");
    var myChart = echarts.init(dom);
    var option;
    var app = {};
    var urlParams = new URLSearchParams(location.search);
    let paramsValue = urlParams.get("value").split(",");
    const yMax = Number(urlParams.get("yMax"));
    const colorType = Number(urlParams.get("colorType")) - 1;
    console.log("最大值", yMax);
    var xData = ["递铺街道"];
    var data1 = [Number(paramsValue[0])]; //下部数据
    var data2 = [Number(paramsValue[1])]; //中
    var data3 = [Number(paramsValue[2])]; //上
    
    var data1Cir = data1[0] ? data1 : [1]; //下部数据
    var data2Cir = data2[0] ? data2 : [1]; //中
    var data3Cir = data3[0] ? data3 : [1]; //上
    var data4 = [];
    for (let i = 0; i < data1.length; i++) {
      data4.push(data1[i] + data2[i] + data3[i]);
    }

    const colorCollection = [
      [["#7A1D1D", "#801F1F", "#B92D2D", "#FB2222", "#F23C3C"], ['#1D5E7A', '#1D5E7A', '#257FA6', '#3BC3FE', '#43C6FE']],
      [["#7A4F1D", "#7A4A1D", "#A67225", "#FEB03B", "#FEA843"], ['#7A4F1D', '#7A4A1D', '#A67225', '#FEB03B', '#FEA843']],
      [["#7E8026", "#7E8026", "#CDD034", "#E3FE3B", "#FEF63B"], ['#6D6D6D', '#797979', '#B5B5B5', '#FFFFFF', '#E8EBEB']],
      [["#7E8026", "#7E8026", "#CDD034", "#E3FE3B", "#FEF63B"], ['#6D6D6D', '#797979', '#B5B5B5', '#FFFFFF', '#E8EBEB']],
      [["#7A1D1D", "#801F1F", "#B92D2D", "#FB2222", "#F23C3C"], ['#1D5E7A', '#1D5E7A', '#257FA6', '#3BC3FE', '#43C6FE']],
      [["#EC4040", "#970404"], ['#3BC3FE', '#00B2FF']],
      [["#7A4F1D", "#7A4A1D", "#A67225", "#FEB03B", "#FEA843"], ['#7A4F1D', '#7A4A1D', '#A67225', '#FEB03B', '#FEA843']],
      [["#FE993B", "#AB6906"], ['#FE993B', '#AB6906']],
      [["#7E8026", "#7E8026", "#CDD034", "#E3FE3B", "#FEF63B"], ['#6D6D6D', '#797979', '#B5B5B5', '#FFFFFF', '#E8EBEB']],
      [["#FFEE54", "#F6FF95"], ['#EEEEEE', '#CECECE']],
    ];
    var option = {
      animation: false,
      // backgroundColor: '#030446',
      // tooltip: {
      //   trigger: "axis",
      //   axisPointer: {
      //     type: "shadow", // 默认为直线，可选为：'line' | 'shadow'
      //   },

      //   formatter: function (parms) {
      //     var str =
      //       "名称：" +
      //       parms[0].axisValue +
      //       "</br>" +
      //       parms[0].marker +
      //       "结案量：" +
      //       parms[0].value +
      //       "</br>" +
      //       parms[1].marker +
      //       "未结案量：" +
      //       parms[1].value;
      //     return str;
      //   },
      // },
      textStyle: {
        color: "#C9C9C9",
      },
      grid: {
        containLabel: true,
        left: "-50%",
        top: "25%",
        bottom: "-5%",
        right: "0%",
      },
      xAxis: {
        type: "category",
        data: xData,
        axisLine: {
          lineStyle: {
            color: "#B5B5B5",
          },
        },
        axisTick: {
          show: false,
        },
        axisLabel: {
          margin: 20, //刻度标签与轴线之间的距离。
          textStyle: {
            fontFamily: "Microsoft YaHei",
            color: "#C9C9C9",
          },
        },
        show: false,
      },
      yAxis: {
        type: "value",
        max: yMax,
        axisLine: {
          show: true,
          lineStyle: {
            color: "#B5B5B5",
          },
        },
        splitLine: {
          lineStyle: {
            // 使用深浅的间隔色
            color: ["#B5B5B5"],
            type: "dashed",
            opacity: 0.5,
          },
        },
        axisLabel: {},
        show: false,
      },
      series: [
        {
          name: "底部柱子",
          data: data1,
          stack: "zs",
          type: "bar",
          barMaxWidth: "auto",
          barWidth: 40,
          itemStyle: getItemStyle(colorCollection[0][colorType]),
        },
        {
          name: "中底部柱子",
          data: data2,
          stack: "zs",
          type: "bar",
          barMaxWidth: "auto",
          barWidth: 40,
          itemStyle: getItemStyle(colorCollection[1][colorType]),
        },
        {
          name: "中顶部柱子",
          data: data2,
          stack: "zs",
          type: "bar",
          barMaxWidth: "auto",
          barWidth: 40,
          itemStyle: getItemStyle(colorCollection[2][colorType]),
        },
        {
          name: "顶部柱子",
          data: data3,
          stack: "zs",
          type: "bar",
          barMaxWidth: "auto",
          barWidth: 40,
          itemStyle: getItemStyle(colorCollection[3][colorType]),
        },
        {
          name: "下部底部圆",
          data: [1],
          type: "pictorialBar",
          barMaxWidth: "20",
          symbolOffset: [0, "50%"],
          symbolSize: [40, 15],
          zlevel: 1,
          itemStyle: getItemStyle(colorCollection[3][colorType]),
        },
        {
          name: "下部顶部圆",
          data: data1Cir,
          type: "pictorialBar",
          barMaxWidth: "20",
          symbolPosition: "end",
          symbolOffset: [0, "-50%"],
          symbolSize: [40, 12],
          zlevel: 1,
          itemStyle: getItemStyle(colorCollection[4][colorType]),
        },
        {
          name: "中部底部圆",
          data: data1Cir,
          type: "pictorialBar",
          barMaxWidth: "20",
          symbolPosition: "end",
          symbolOffset: [0, "-60%"],
          symbolSize: [40, 12],
          zlevel: 2,
          itemStyle: getItemStyle(colorCollection[5][colorType]),
        },
        {
          name: "中部顶部圆",
          data: [data1Cir[0] + data2Cir[0]],
          type: "pictorialBar",
          barMaxWidth: "20",
          symbolPosition: "end",
          symbolOffset: [0, "-50%"],
          symbolSize: [40, 15],
          zlevel: 2,
          itemStyle: getItemStyle(colorCollection[6][colorType]),
        },
        {
          name: "上部底部圆",
          data: [data1Cir[0] + data2Cir[0]],
          type: "pictorialBar",
          barMaxWidth: "20",
          symbolPosition: "end",
          symbolOffset: [0, "-60%"],
          symbolSize: [40, 15],
          zlevel: 2,
          itemStyle: getItemStyle(colorCollection[7][colorType]),
        },
        {
          name: "上部顶部圆",
          data: data4,
          type: "pictorialBar",
          barMaxWidth: "20",
          symbolPosition: "end",
          symbolOffset: [0, "-50%"],
          symbolSize: [40, 12],
          zlevel: 2,
          itemStyle: getItemStyle(colorCollection[8][colorType]),
          label: {
            normal: {
              show: true,
              position: "top",
              fontSize: 14,
              color: "#E6F7FF",
              backgroundColor: {
                image: "../images/back.png",
              },
              height: 20,
              padding: [5, 10, 5, 11],
            },
          },
        },
      ],
    };

    if (option && typeof option === "object") {
      myChart.setOption(option);
    }

    function getItemStyle(colorArr) {
      return {
        color: {
          x: 0,
          y: 0,
          x2: 1,
          y2: 0,
          type: "linear",
          global: false,
          colorStops:
            colorArr.length === 2
              ? [
                {
                  offset: 0,
                  color: colorArr[0],
                },
                {
                  offset: 1,
                  color: colorArr[1],
                },
              ]
              : [
                {
                  offset: 0,
                  color: colorArr[0],
                },
                {
                  offset: 0.25,
                  color: colorArr[1],
                },
                {
                  offset: 0.5,
                  color: colorArr[2],
                },
                {
                  offset: 0.75,
                  color: colorArr[3],
                },
                {
                  offset: 1,
                  color: colorArr[4],
                },
              ],
        },
      };
    }
  </script>
</body>

</html>